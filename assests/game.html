<!DOCTYPE html>
<html>

<head>
    <title>Crystal Game</title>
</head>

<body>
    <div style="text-align: center">
        <h1>Master Crystal</h1>
        <h3>My Realm, My Rules!</h3>

        <ul style="list-style-type:none">
            <li>I will show you a number.</li>
            <li>I will give you four crystals.</li>
            <li>The crystals have random values.</li>
            <li>Click on the crystals if you dare.</li>
            <li>Can you match my number without going over?</li>
        </ul>

        <h3>Many have tried, few overcome the Master Crystal!</h3>

        <button id="gameStart">Challenge Me!</button>

        <p>Master Crystal Number: <span id="gameNum"></span></p>

        <p>Your Score: <span id="playerScore"></span></p>

        <div>
            <span>
                <button class="crystal" data-index="0">Crystal 1</button>
                <button class="crystal" data-index="1">Crystal 2</button>
                <button class="crystal" data-index="2">Crystal 3</button>
                <button class="crystal" data-index="3">Crystal 4</button>
            </span>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="assets/javascript/game.js"></script>
    <script type="text/javascript">

        var gameNum = ['5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15'];
        var crystalRandomNum = [0, 0, 0, 0];
        var crystalNum = 0;
        var score = 0;
        var isGameEnded = false;

        var gameRandomNum = Math.floor(Math.random() * gameNum.length + 5);

        function startGame() {
            crystalNum = 0;
            score = 0;
            crystalRandomNum = crystalRandomNum.map(x => Math.floor(Math.random() * 5));
            gameRandomNum = Math.floor(Math.random() * gameNum.length + 5);

            $('#gameNum').text((gameRandomNum));
            display();
        }

        function display() {
            $('#playerScore').text(Math.floor(score));
        }

        $('#gameStart').on('click', startGame)

        $('.crystal').on('click', function addScore() {
            console.log($(this).data('index'));
            if (!isGameEnded) {
                score += crystalRandomNum[$(this).data('index')]
            }


            if (score > gameRandomNum) {
                alert("You Lost!");
                isGameEnded = true;
            } else if (score == gameRandomNum) {
                alert("You Win!");
                isGameEnded = true;
            } else {

            }

            display();
        })

        display()


    </script>

</body>

</html>